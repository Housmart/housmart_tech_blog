<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Event on カウル Tech Blog</title>
    <link>http://techblog.housmart.co.jp/tags/event/</link>
    <description>Recent content in Event on カウル Tech Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Thu, 10 Mar 2016 16:57:26 +0900</lastBuildDate>
    <atom:link href="http://techblog.housmart.co.jp/tags/event/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>テレビ放送に向けての負荷対策(AWS x Rails の場合)[後編]</title>
      <link>http://techblog.housmart.co.jp/2016/03/10/prepare_for_wbs2/</link>
      <pubDate>Thu, 10 Mar 2016 16:57:26 +0900</pubDate>
      
      <guid>http://techblog.housmart.co.jp/2016/03/10/prepare_for_wbs2/</guid>
      <description>

&lt;p&gt;Housmart高松です。&lt;/p&gt;

&lt;p&gt;先日、テレビ東京のWBS（ワールドビジネスサテライト）で弊社サービス「カウル」をご紹介いただきました。&lt;br /&gt;
前編ではテレビ放送に向けたAWS上のシステムの事前準備について説明しました。後編では放送当日と事後の振り返りについて書いていこうと思います。&lt;/p&gt;

&lt;p&gt;※前編をご覧になっていない方は&lt;a href=&#34;http://techblog.housmart.co.jp/2016/03/03/prepare_for_wbs/&#34;&gt;こちら&lt;/a&gt;を先にご覧ください。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;WBSサイト(不動産流通に革新は起こるか): &lt;a href=&#34;http://txbiz.tv-tokyo.co.jp/wbs/feature/post_107290/&#34;&gt;http://txbiz.tv-tokyo.co.jp/wbs/feature/post_107290/&lt;/a&gt;&lt;br /&gt;
仲介手数料無料の不動産サイト「カウル」: &lt;a href=&#34;https://kawlu.com/&#34;&gt;https://kawlu.com/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;内容:3d905968c659a2d9572fbb959d952a4f&#34;&gt;内容&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;前提 [前編]&lt;/li&gt;
&lt;li&gt;事前準備 [前編]&lt;/li&gt;
&lt;li&gt;放送当日

&lt;ul&gt;
&lt;li&gt;直前の放送時間変更&lt;/li&gt;
&lt;li&gt;放送内容&lt;/li&gt;
&lt;li&gt;アクセス数まとめ&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;振り返りとまとめ

&lt;ul&gt;
&lt;li&gt;アクセス予想振り返り&lt;/li&gt;
&lt;li&gt;まとめ&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;3-放送当日:3d905968c659a2d9572fbb959d952a4f&#34;&gt;3.放送当日&lt;/h2&gt;

&lt;h3 id=&#34;直前の放送時間変更:3d905968c659a2d9572fbb959d952a4f&#34;&gt;直前の放送時間変更&lt;/h3&gt;

&lt;p&gt;WBSは通常23時からの放送なのですが、この日は前の番組が世界卓球の日本vsドイツ戦でした。最終ゲームまでもつれ込む白熱の試合だったため放送時間がぎりぎりまで伸びて、放送開始が0時30分に変更になりました。&lt;/p&gt;

&lt;p&gt;以前とくダネで紹介していただいた時も他の大きいニュースの影響で放送日が2度延期されたという経験もあり、テレビは本当に放映されるまでは気を抜けないなという印象です。&lt;/p&gt;

&lt;p&gt;会社のメンバーで真剣に卓球を応援していたのですが、残念ながら日本が2-3で負けてしまいました。&lt;br /&gt;
この放送時間の変更がどの程度視聴率に影響するかはわかりませんが、気を取り直していざ放送に望みます。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;放送内容:3d905968c659a2d9572fbb959d952a4f&#34;&gt;放送内容&lt;/h3&gt;

&lt;p&gt;放送が始まり15分、いよいよ特集のコーナーです。&lt;br /&gt;
今回は不動産ベンチャーの新しい取り組みという切り口で、大家さんと直接やりとりをすることで仲介手数料を無料にする賃貸サービスの &lt;strong&gt;ウチコミ！&lt;/strong&gt; さんと共に弊社を取り上げていただきました。&lt;/p&gt;

&lt;p&gt;大江アナウンサーが従来の中古不動産売買の仲介手数料をフリップを使って説明します。
&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160310_00.png&#34; title=&#34;seen0&#34;&gt;&lt;/p&gt;

&lt;p&gt;間にウチコミさんの紹介をはさみ、&lt;br /&gt;
会社名とともにオフィスが映りました。
&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160310_01.png&#34; title=&#34;seen1&#34;&gt;&lt;/p&gt;

&lt;p&gt;「今年一月、売買の仲介手数料を無料にするカウルというサービスを始めました」&lt;br /&gt;
のナレーションと共にサービス名、TOPページのアップが映ります。
&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160310_02.png&#34; title=&#34;seen2&#34;&gt;&lt;/p&gt;

&lt;p&gt;サービスの説明が続きます。どのくらい経費を抑えられるか、月額１万円の会員サービスの説明など。&lt;br /&gt;
このあたりでピンと来てくれた方は検索を始めてくれるのではないでしょうか。
&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160310_03.png&#34; title=&#34;seen3&#34;&gt;&lt;/p&gt;

&lt;p&gt;弊社代表針山が熱い思いを語ります。このシーンも社名が入っています。
&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160310_04.png&#34; title=&#34;seen4&#34;&gt;&lt;/p&gt;

&lt;p&gt;最後は実際にカウルで物件を購入していただいた方のインタビューが流れます。
&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160310_05.png&#34; title=&#34;access graph&#34;&gt;&lt;/p&gt;

&lt;p&gt;&lt;br&gt;
今回は全体で2分ほどの紹介でした。そのうち3分の1程度はサービス名もしくは社名が画面に写っていました。&lt;br /&gt;
ナレーションでもサービス名を3回・社名を1回読み上げてもらえたので、検索のためのキーワードは十分に視聴者の方の頭に残ったのではないかと思います。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;アクセス数まとめ:3d905968c659a2d9572fbb959d952a4f&#34;&gt;アクセス数まとめ&lt;/h3&gt;

&lt;p&gt;実際のアクセス数を見てみましょう。&lt;/p&gt;

&lt;p&gt;AWSのCloudWatchで見たバランサへのアクセス数のグラフです。&lt;br /&gt;
一分間単位の合計値が見れて便利ですね。これはバランサへのすべてのアクセスの合計なので画像やJavascript、CSSの読み込みもカウントされることに注意してください。
&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160310_06.png&#34; title=&#34;access graph&#34;&gt;&lt;/p&gt;

&lt;p&gt;カウルの場合、画像などを合計するとTOPページの読み込みで30回程度バランサへのアクセスが発生します。
それを考慮にいれて計算すると、最大で分間 &lt;strong&gt;450アクセス&lt;/strong&gt; が来ており、アクセスが増えてから落ち着くまでにトータルで &lt;strong&gt;2千件&lt;/strong&gt; ほどのアクセスが来ていました。&lt;/p&gt;

&lt;p&gt;また、実際にサーバ上のログを集計したところ、 &lt;strong&gt;30QPS（秒間アクセス）&lt;/strong&gt; が今回の最大値でした。&lt;br /&gt;
前編で予想した667QPSとは程遠い結果となってしまいました。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h2 id=&#34;4-振り返りとまとめ:3d905968c659a2d9572fbb959d952a4f&#34;&gt;4.振り返りとまとめ&lt;/h2&gt;

&lt;h3 id=&#34;アクセス予想振り返り:3d905968c659a2d9572fbb959d952a4f&#34;&gt;アクセス予想振り返り&lt;/h3&gt;

&lt;p&gt;実際の結果を持って事前の予想を振り返ってみましょう。&lt;br /&gt;
テレビ出演に舞い上がってテンション高めに予想していた部分を冷静に下方修正してみると、以下の様な数値が妥当では無いかと思いました。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;center&#34;&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;事前予想&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;結果からの推測&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;テレビ局のリーチ人数&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;4,000万&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;4,000万&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;視聴率&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;5%&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;font color=&#34;red&#34;&gt;2%&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Web検索する人の割合&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;5%&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;font color=&#34;red&#34;&gt;0.25%&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;一人あたりの閲覧ページ数&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;font color=&#34;red&#34;&gt;1&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;総アクセス数&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;20万&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;2千&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;放映時間が深夜1時近くになってしまったことを考慮に入れて視聴率は2%、&lt;br /&gt;
Web検索する人の割合は400人に一人だと仮定して0.25%（この数字はサービスの内容や紹介のされ方によって大きく変わるとは思いますが、冷静に考えるとテレビを見ていて5%の確率で検索はしないですよね）&lt;br /&gt;
また、カウルの場合はTOPページに情報をたくさん盛り込んでいるので、興味を持ってもらえた人はTOPページの滞在時間が長くなる傾向があります。なので、放送前後数分間における一人あたりの閲覧ページ数を1と仮定しなおしました。&lt;/p&gt;

&lt;p&gt;その上で再度総アクセス数を計算してみると、今回のテレビ放映の前後で来てもらえたユーザ数とほぼイコールの2千件となりました。&lt;/p&gt;

&lt;p&gt;また、最大QPSの試算に関しては、2千件の総アクセスに対して最大30QPS、つまり総アクセス数の &lt;strong&gt;1.5%&lt;/strong&gt; のアクセスがピークの1秒間に来たという数字が一つの指標になるのでは無いでしょうか。&lt;br /&gt;
（上記のアクセスグラフを見ても分かる通り、紹介が終わった次の1分間にアクセスが集中しているなど、一定の傾向があるような気がしました）&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;まとめ:3d905968c659a2d9572fbb959d952a4f&#34;&gt;まとめ&lt;/h3&gt;

&lt;p&gt;今回の事例の振り返りの内容も含めて、テレビ出演時の負荷見積もりの式を再度掲載しておきます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;総アクセス数 = テレビ局のリーチ人数 × 視聴率 × Web検索する人の割合(≒0.25%) (=総アクセス人数)
                      × 一人あたりの平均閲覧ページ数

最大QPS = 総アクセス数 × 1.5%(※実測値から算出した割合)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;これにある程度バッファを設ければ妥当な見積もりとなりそうです。
今回は事前の予想がつかなかったことで見積もりを大きく外してしまいましたが、AWSコストとしては数ドル程度の損失だったので助かりました。AWSさまさまです。&lt;/p&gt;

&lt;p&gt;後日談ですが、WBSは&lt;a href=&#34;http://txbiz.tv-tokyo.co.jp/&#34;&gt;オンデマンド&lt;/a&gt;で見ている方も結構多いようで、翌日以降も数日間アクセスが増えていました。&lt;/p&gt;

&lt;p&gt;夢の20万アクセスには遠く及びませんでしたが、まだローンチして1ヶ月半のカウルにとっては認知してもらう大変よい機会になりました。&lt;br /&gt;
また、ビジネスモデル的にも信用が大事になってくる領域なので、その点でも大きくプラスになったと思います。&lt;/p&gt;

&lt;p&gt;今後の皆さんの参考になれば幸いです。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>テレビ放送に向けての負荷対策(AWS x Rails の場合)[前編]</title>
      <link>http://techblog.housmart.co.jp/2016/03/03/prepare_for_wbs/</link>
      <pubDate>Thu, 03 Mar 2016 16:57:26 +0900</pubDate>
      
      <guid>http://techblog.housmart.co.jp/2016/03/03/prepare_for_wbs/</guid>
      <description>

&lt;p&gt;Housmart高松です。&lt;/p&gt;

&lt;p&gt;先日、テレビ東京のWBS（ワールドビジネスサテライト）で弊社サービス「カウル」をご紹介いただきました。今回は、その前後でシステムの準備として実施したこと、当日の実際のアクセス数などをご紹介します。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;WBSサイト(不動産流通に革新は起こるか): &lt;a href=&#34;http://txbiz.tv-tokyo.co.jp/wbs/feature/post_107290/&#34;&gt;http://txbiz.tv-tokyo.co.jp/wbs/feature/post_107290/&lt;/a&gt;&lt;br /&gt;
仲介手数料無料の不動産サイト「カウル」: &lt;a href=&#34;https://kawlu.com/&#34;&gt;https://kawlu.com/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;突然のテレビ取材！テレビに出るとどのくらいアクセスが来るの？サーバは何台増やしたらいいの？&lt;br /&gt;
そんな時の参考になれば幸いです。&lt;/p&gt;

&lt;h2 id=&#34;内容:08e118674fea9989bc7c591023d8b196&#34;&gt;内容&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;前提

&lt;ul&gt;
&lt;li&gt;前回の失敗&lt;/li&gt;
&lt;li&gt;フロントエンド システム構成&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;事前準備

&lt;ul&gt;
&lt;li&gt;負荷予測&lt;/li&gt;
&lt;li&gt;サーバ台数決定&lt;/li&gt;
&lt;li&gt;サーバ増強&lt;/li&gt;
&lt;li&gt;その他&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;放送当日 [後編]&lt;/li&gt;
&lt;li&gt;振り返りとまとめ [後編]&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;1-前提:08e118674fea9989bc7c591023d8b196&#34;&gt;1.前提&lt;/h2&gt;

&lt;h3 id=&#34;前回の失敗:08e118674fea9989bc7c591023d8b196&#34;&gt;前回の失敗&lt;/h3&gt;

&lt;p&gt;つい半月ほど前に別の局で朝の番組にもちらっと社名を出していただいたのですが（5秒くらい）、AWSのSmallインスタンスで冗長化もせず、のんきに構えていたところ、一部のサーバが一瞬でやられてしまいました。&lt;/p&gt;

&lt;p&gt;かすっただけで右腕を持って行かれたぐらいのダメージを受けました。衝撃でした。&lt;br /&gt;
この反省から &lt;strong&gt;準備大事！&lt;/strong&gt; ということを学んだので今回はしっかりと準備をして望みました。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;フロントエンド-システム構成:08e118674fea9989bc7c591023d8b196&#34;&gt;フロントエンド システム構成&lt;/h3&gt;

&lt;p&gt;「カウル」フロントエンドのシステム構成を簡単にご紹介します。&lt;br /&gt;
基本的にはAPI（Rails x MySQL）を、別プロジェクトのフロントエンドRailsアプリケーションから呼び出す構成になっています。また、&lt;a href=&#34;https://kawlu.com/journal/&#34;&gt;自社メディアであるマンションジャーナル&lt;/a&gt;も運営しているため、Wordpressが動くサーバが別にあります。&lt;br /&gt;
SEOの観点からサブディレクトリで Web app と自社メディアの切り分けを行っており、クラウドフロントでサブディレクトリごとにアクセスを振り分けています。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160303_01.png&#34; title=&#34;Kawlu Front Architecture&#34;&gt;&lt;/p&gt;

&lt;p&gt;今回は各EC2サーバをオートスケールグループに入れ冗長化を行い、負荷見積もりにしたがってスペックと台数を決定しました。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h2 id=&#34;2-事前準備:08e118674fea9989bc7c591023d8b196&#34;&gt;2.事前準備&lt;/h2&gt;

&lt;h3 id=&#34;負荷予測:08e118674fea9989bc7c591023d8b196&#34;&gt;負荷予測&lt;/h3&gt;

&lt;p&gt;負荷予測に関しては以下の記事を参考にさせていただきました。&lt;br /&gt;
&lt;a href=&#34;http://qiita.com/chase0213/items/b5ecd4377f60605332e1&#34;&gt;[Qiita]gatling による負荷試験とテレビ露出見積り&lt;/a&gt;
&lt;br&gt;&lt;/p&gt;

&lt;p&gt;まず、総アクセス数を以下の式により求めます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;総アクセス数 = テレビ局のリーチ人数 × 視聴率 × Web検索する人の割合 (=総アクセス人数)
                      × 一人あたりの平均閲覧ページ数
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;今回はテレビ東京なので&lt;a href=&#34;http://www.tv-tokyo.co.jp/contents/ir/jpn/media/mediadata.html&#34;&gt;関東圏で約4,000万人のリーチ&lt;/a&gt;、深夜帯なので視聴率 &lt;strong&gt;5%&lt;/strong&gt; 、テレビを見てWebで検索する人が視聴した人全体の &lt;strong&gt;5%&lt;/strong&gt; と仮定し、一人あたりの平均閲覧ページ数は過去実績から2ページとしました。&lt;br /&gt;
これらの仮定の上で、放送中の総アクセス数は以下のように求まります。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;総アクセス数 = 4,000万 × 5% × 5% × 2 = 20万アクセス
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;テレビすごい！&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;これをテレビ出演時間で割ると一秒あたりの平均リクエスト数(QPS)が求まります。弊社の紹介が何分間流れるかは本番を見るまで分からなかったのですが、今回は5分間と仮置きしました。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;出演時間のQPS = 20万アクセス ÷ 300秒 = 平均 667 QPS
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;上記はあくまで平均の値なので、この数字ピッタリに合わせて構築するとアクセスがスパイクした時にリソースが足りなくなってしまいます。&lt;br /&gt;
せっかくのチャンス、1アクセスたりとも落としたくなかったので、アクセスがスパイクすることも考慮に入れてバッファを積み &lt;strong&gt;1000 QPS&lt;/strong&gt; に耐えられる構成にしようということに決めました。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;サーバ台数決定:08e118674fea9989bc7c591023d8b196&#34;&gt;サーバ台数決定&lt;/h3&gt;

&lt;p&gt;こちらも先ほどの&lt;a href=&#34;http://qiita.com/chase0213/items/b5ecd4377f60605332e1&#34;&gt;Qiita記事&lt;/a&gt;を参考にAWSサーバのスペックと台数を決定しました。&lt;/p&gt;

&lt;p&gt;EC2とRDSで動く Rails x MySQL の構成で、1vCPUあたり100[QPS]程度のリクエストを捌くことが可能なようです。
今回の構成も参考記事の構成とほぼ似ているため、大きく外すことはないだろうということでこちらの結果をそのまま流用させていただきました。&lt;/p&gt;

&lt;p&gt;Front・APIサーバ共に10vCPU必要ということで、それぞれ &lt;strong&gt;t2.medium x 5 台&lt;/strong&gt; の構成に決定しました。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;サーバ増強:08e118674fea9989bc7c591023d8b196&#34;&gt;サーバ増強&lt;/h3&gt;

&lt;p&gt;深夜からの放送だったので、夕方頃おもむろにインスタンスを増やそうとしたところエラー。もう一度試してもエラー。
ググってみるとAWSには各リソースごとに上限が決められていて、その上限にぶつかってしまっていました。&lt;br /&gt;
各上限を上げるためにはAWSに申請が必要なようです。詳しくはこちら→&lt;a href=&#34;http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/ec2-resource-limits.html&#34;&gt;Amazon EC2 サービスの制限&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;初期の設定でEC2インスタンスは20個までに制限されているようです。&lt;/p&gt;

&lt;p&gt;今回はAWSのサポートセンターに「テレビの放送があるので！」とメッセージを添えて申請を送ったところ、数時間後にご対応いただけたので事なきを得ましたが、危ないところでした。AWSの中の人ありがとうございました。みなさん &lt;strong&gt;是非この制限の存在を頭に入れておいてください&lt;/strong&gt; 。&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h3 id=&#34;その他:08e118674fea9989bc7c591023d8b196&#34;&gt;その他&lt;/h3&gt;

&lt;p&gt;その他、会社名で検索されることも考慮に入れて、会社紹介ページや旧サービスからも「カウル」のランディングページに導線を貼り対策をしました。&lt;br /&gt;
万が一のことを考えてオフィスにスタンバイ、ピザとコーラを用意して放送を待ちます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://techblog.housmart.co.jp/images/20160303_02.jpg&#34; title=&#34;Stand by&#34;&gt;&lt;/p&gt;

&lt;p&gt;はたしてどの程度アクセスが来たのでしょうか！？
&lt;a href=&#34;http://techblog.housmart.co.jp/2016/03/10/prepare_for_wbs2/&#34;&gt;[後編]&lt;/a&gt;に続く&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Hack Day 2016ハッカソンに参加しました！</title>
      <link>http://techblog.housmart.co.jp/2016/02/17/hack-day-2016%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3%E3%81%AB%E5%8F%82%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F/</link>
      <pubDate>Wed, 17 Feb 2016 16:57:26 +0900</pubDate>
      
      <guid>http://techblog.housmart.co.jp/2016/02/17/hack-day-2016%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3%E3%81%AB%E5%8F%82%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F/</guid>
      <description>

&lt;p&gt;今週からHousmartで働く松江です！&lt;/p&gt;

&lt;p&gt;先日、Yahoo! Japanさんが主催する日本最大級のハッカソンイベントである&lt;a href=&#34;http://hackday.jp/2016/&#34;&gt;Hack Day 2016&lt;/a&gt;に参加してきたのでこの場を借りてご紹介します。&lt;/p&gt;

&lt;h2 id=&#34;作ったもの:3fc30d4efb0f9f17a0ee9ad6f39c20bb&#34;&gt;作ったもの&lt;/h2&gt;

&lt;div class=&#34;embed-video-container&#34;&gt;&lt;iframe src=&#34;https://www.youtube.com/embed/ZgpvXK3wfkc&#34; allowfullscreen&gt;&lt;/iframe&gt;&lt;/div&gt;

&lt;p&gt;スライド: &lt;a href=&#34;https://speakerdeck.com/matsue/kizukai-at-hack-day-2016&#34;&gt;https://speakerdeck.com/matsue/kizukai-at-hack-day-2016&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;KizukAIという、飲み会でちょっとした気遣いのできるAIを作りました。&lt;/p&gt;

&lt;p&gt;KizukAIは飲み会のテーブルに置くことを想定して作られており、出来ることは以下の3つです。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ビールがなくなったことを検知してビールの追加注文、またはお冷の注文を行う&lt;/li&gt;
&lt;li&gt;みんなの笑顔を検知して、合いの手を入れたり一緒に笑う&lt;/li&gt;
&lt;li&gt;飲み会中の自然な笑顔画像を集めておく&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;1つ目の機能は、まさしく夢の&lt;strong&gt;ビールのオートデプロイ&lt;/strong&gt;です！！&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lh3.googleusercontent.com/0qgHEBRne3GBTsPTkJn5MqAsYdFihI-3LTJSm8P33iOraRoy36An06qGGQo8pC5jKr0afMeqOFA=s800&#34; title=&#34;Demo&#34;/&gt;&lt;/p&gt;

&lt;h3 id=&#34;使ったもの:3fc30d4efb0f9f17a0ee9ad6f39c20bb&#34;&gt;使ったもの&lt;/h3&gt;

&lt;p&gt;主に以下のデバイス・APIを使用して作りました。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://theta360.com/ja/about/theta/s.html&#34;&gt;THETA S&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.clarifai.com/&#34;&gt;Clarifaiの画像解析API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.smt.docomo.ne.jp/?p=docs.api.page&amp;amp;api_name=image_recognition&amp;amp;p_name=api_usage_scenario&#34;&gt;Docomoの画像認識API&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;THETA Sは、以下のようにドキュメントに書かれているようにAPIが変更され、先代よりもAPIが扱いやすいものになっていました。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;RICOH THETA API v2は、Google社のOpen Spherical Camera API Version 1.0（OSC）に準拠しています。&lt;br /&gt;
&lt;a href=&#34;https://developers.theta360.com/ja/docs/v2/api_reference/&#34;&gt;https://developers.theta360.com/ja/docs/v2/api_reference/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Clarifaiは&lt;a href=&#34;https://cloud.google.com/vision/&#34;&gt;Google Cloud Vision&lt;/a&gt;のように、画像に写っている物体や状況に関する情報を返してくれるAPIを提供しています。
例えば以下のビール画像であれば&amp;rdquo;Beer, Glass, Foam, Cold, Drink, Indoor&amp;rdquo;といった情報が得られます。
泡があること、冷たいこと、室内であることも認識されていて驚きです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lh3.googleusercontent.com/g2L3vh5pcQrdyl-o5UrM8GZOgy7n6hfAjL5LHzB52Oz-uaKUHwwF2PQczrS2G_OUzAGTQExgBdM=s400&#34; title=&#34;Beer&#34;/&gt;&lt;/p&gt;

&lt;p&gt;動画にも同等のことができるようなので、そちらも使うと面白いことができそうです。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.clarifai.com/#demo&#34;&gt;Clarifaiのデモ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://newdocs.clarifai.com/guide/info#info&#34;&gt;ClarifaiのAPIドキュメント&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;苦労したところ-工夫したところ:3fc30d4efb0f9f17a0ee9ad6f39c20bb&#34;&gt;苦労したところ・工夫したところ&lt;/h3&gt;

&lt;p&gt;Clarifaiの前は&lt;a href=&#34;https://cloud.google.com/vision/&#34;&gt;Google Cloud Vision&lt;/a&gt;の使用を検討していましたが審査が間に合いませんでした。
Google Cloud Visionは現在プレビュー版を提供している段階で、使用するには申請が必要です。
審査には時間がかかるので、利用を検討する方は早めに申し込んでおくと良いと思います。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;追記: Google Cloud Visionの&lt;a href=&#34;ttp://googlecloudplatform.blogspot.jp/2016/02/Google-Cloud-Vision-API-enters-beta-open-to-all-to-try.html&#34;&gt;ベータ版の提供が始まり&lt;/a&gt;、申請すればすぐ使えます。
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ビールの認識精度も上がらずに思考錯誤をしました。
開発会場で撮影されたビール画像は、背景が白いためかオフィスの写真と判定されビールとなかなか判定されませんでした。
ここは背景に暗めの色の布を置くことで判定率が上がりました。
しかし、白い背景を黒でデータ上で塗りつぶしたり、画像からビールジョッキ部分だけの切り抜いただけではビールの判定率はあまり変わりませんでした。
実際の居酒屋でテストしたところ、ビールが持ち上げられて卓上から離れている時間以外はほぼ認識できていたので、暗めの部屋や十分な泡もビールっぽさとして必要なのかもしれません。&lt;/p&gt;

&lt;p&gt;また、開発会場内ではWifi使用者が多かったせいか、THETAのWifi転送速度が非常に遅かったため、デモの90秒以内に画像転送できるよう転送するサイズを小さくするといった工夫もしていました。
TEHTAはWifi接続してAPIを叩く必要があるため、操作するデバイスにはLANケーブルなど別のネットワークが必要なことも注意が必要です。&lt;/p&gt;

&lt;h3 id=&#34;さいごに:3fc30d4efb0f9f17a0ee9ad6f39c20bb&#34;&gt;さいごに&lt;/h3&gt;

&lt;p&gt;今回の作ったものはこちらのレポジトリに置いています。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/housmart/kizukai&#34;&gt;https://github.com/housmart/kizukai&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;また、幸いにも入賞することができ、CerevoさんのHackeyを頂いたので、これを使ってまた何か作ったらレポートしようと思います！&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lh3.googleusercontent.com/M4uyXV2O1J0hKXoqWvnah4stqPaOAQm9z2f9G-7Vb7Pd3FCTIRd2wrbJKcoWRyxvb2y4m018HWc=s400&#34; title=&#34;Hackey&#34;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lh3.googleusercontent.com/8e8SL2kEUFObnBivBczy_Pa10P5X5Jjfn2VVOc_WydnoSmQeuPyKi179CpDeaS-OVmny_u_rbrs=s800&#34; title=&#34;Hackey&#34;/&gt;&lt;/p&gt;

&lt;p&gt;Yahoo! Japanさん、非常に楽しいイベントをありがとうございました！&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>